# GitLab CI Release Pipeline
# Auto-generated by: cleo release init-ci
# Platform: GitLab CI
# Artifact Type: {{ARTIFACT_TYPE}}
# Version: {{VERSION}}

stages:
  - validate
  - build
  - publish

variables:
  ARTIFACT_TYPE: "{{ARTIFACT_TYPE}}"
  VERSION: "{{VERSION}}"

.base:
  image: ubuntu:latest
  before_script:
    - echo "Setting up environment..."
    # Environment setup goes here

validate:
  extends: .base
  stage: validate
  script:
    - echo "Running validation gates..."
{{GATES}}
  only:
    - tags
    - /^v[0-9]+\.[0-9]+\.[0-9]+$/

build:
  extends: .base
  stage: build
  script:
    - echo "Building artifacts..."
    # Build commands go here
  artifacts:
    paths:
      - dist/
      - "*.tar.gz"
    expire_in: 1 week
  only:
    - tags

publish:
  extends: .base
  stage: publish
  script:
    - echo "Publishing artifacts..."
    # Publish commands go here
  environment:
    name: production
  dependencies:
    - build
  only:
    - tags
  # Secrets configured in GitLab CI/CD variables:
  # - NPM_TOKEN
  # - PYPI_TOKEN
  # etc.
